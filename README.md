# Техническое задание: Система управления балансом пользователей

## 1. Технические требования

### 1.1. Стек технологий
- **Бэкенд:** PHP 8, Laravel ^11
- **База данных:** PostgreSQL
- **Фронтенд:** Vue 3
- **UI:** Talwind
- **Сборка ресурсов:** Laravel Mix/Vite для сборки JS и CSS/SCSS

### 1.2. Требования к базе данных
- Используйте миграции Laravel для создания структуры базы данных
- Требуемые таблицы:
  - Пользователи (информация о пользователях системы)
  - Баланс пользователя (текущий финансовый баланс)
  - Операции (история всех транзакций)

## 2. Функциональные требования

### 2.1. Интерфейс пользователя
- Авторизация / Регистрация
- **Главная страница:**
  - Отображение текущего баланса пользователя
  - Список пяти последних операций
  - Автоматическое обновление данных через заданный интервал времени (AJAX)
- **Страница истории операций:**
  - Табличное представление всех операций
  - Возможность сортировки по полю "дата"
  - Функция поиска по полю "описание"

### 2.2. Бэкенд функциональность
- **Консольные команды Artisan:**
  - `user:create {email} {password} {name}` - создание нового пользователя
    - Пример: `php artisan user:create user@example.com password123 "User Name"`
    - Параметры:
      - `email` - email пользователя (уникальный)
      - `password` - пароль пользователя
      - `name` - имя пользователя
    - При успешном создании выводит ID и email пользователя
    - При ошибке выводит сообщение об ошибке

  - `transaction:process {email} {amount} {type} {description}` - проведение операции по балансу пользователя
    - Пример: `php artisan transaction:process user@example.com 1000 deposit "Initial deposit"`
    - Параметры:
      - `email` - email пользователя
      - `amount` - сумма операции (положительное число)
      - `type` - тип операции (deposit - пополнение, withdrawal - списание)
      - `description` - описание операции
    - Особенности:
      - Запрещает отрицательный баланс
      - Использует транзакции для атомарности операций
      - Логирует ошибки при неудачных операциях
      - При успешном выполнении выводит ID транзакции и её статус
      - При ошибке выводит сообщение об ошибке

- **Обработка операций:**
  - Реализация обработки транзакций с использованием Laravel Queues
  - Асинхронная обработка через `ProcessTransactionJob`
  - Автоматическое обновление статуса транзакции при ошибках
  - Логирование всех ошибок обработки

## Локальный запуск приложения

Команды запуска из `Taskfile.yml`

1. Сборка образов проекта

```
task build
```

